CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    email VARCHAR(255) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL
);

CREATE TABLE admin_logs (
    id INT PRIMARY KEY AUTO_INCREMENT,
    event VARCHAR(255) NOT NULL,
    message VARCHAR(255) NOT NULL,
    time DATETIME DEFAULT CURRENT_TIMESTAMP,
    user INT,
    FOREIGN KEY (user) REFERENCES users(id)
);

CREATE TABLE foods (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    calories INT NOT NULL,
    barcode VARCHAR(255),
    serving_size INT,
    carbs FLOAT,
    protein FLOAT,
    fat FLOAT,
    created DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,
    edited DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by INT,
    edited_by INT,
    FOREIGN KEY (created_by) REFERENCES users(id),
    FOREIGN KEY (edited_by) REFERENCES users(id)
);

CREATE TABLE recipes (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    created DATETIME DEFAULT CURRENT_TIMESTAMP,
    created_by INT,
    FOREIGN KEY (created_by) REFERENCES users(id)
);

CREATE TABLE ingredients (
    id INT PRIMARY KEY AUTO_INCREMENT,
    food INT,
    recipe INT,
    FOREIGN KEY (food) REFERENCES foods(id),
    FOREIGN KEY (recipe) REFERENCES recipes(id)
);

CREATE TABLE logs (
    id INT PRIMARY KEY AUTO_INCREMENT,
    date DATE NOT NULL,
    time TIME,
    meal VARCHAR(255) NOT NULL,
    user INT,
    food INT,
    FOREIGN KEY (user) REFERENCES users(id),
    FOREIGN KEY (food) REFERENCES foods(id)
);

CREATE TABLE goals (
    id INT PRIMARY KEY AUTO_INCREMENT,
    user INT,
    FOREIGN KEY (user) REFERENCES users(id)
)